if(document.querySelector(".FilterComponent")){const PaginationDiv=document.querySelector(".CardsContainer__pagination"),CardsContainer=document.querySelector(".CardsContainer"),FiltersForm=document.querySelector(".FilterComponent"),OrderSelect=document.querySelector("#sort-input"),ResetButton=document.querySelector("#ResetButton"),queries=new URLSearchParams(window.location.search),CONFIGS={domain:window.location.origin,url:CardsContainer&&CardsContainer.dataset?CardsContainer.dataset.pagination:"",page:PaginationDiv&&PaginationDiv.dataset?PaginationDiv.dataset.current:0,filters:{province:queries.get("province")||-1,category:queries.get("category")||-1,name:queries.get("name")||null},order:queries.get("order")||1};function define_filters(filters){let params=new URLSearchParams;return params.set("page",CONFIGS.page),params.set("order",CONFIGS.order),filters.name&&params.set("name",filters.name),filters.category&&params.set("category",filters.category),filters.province&&params.set("province",filters.province),params.toString()}function change_order(order){let url=CONFIGS.url+"?";CONFIGS.order=order;url+=define_filters(CONFIGS.filters),window.location.replace(url)}function submit_filter(form){let url=CONFIGS.url+"?";const Form=new FormData(form);url+=define_filters({name:Form.get("name"),category:Form.get("category"),province:Form.get("province")}),window.location.replace(url)}function change_page(page){let url=CONFIGS.url+"?";CONFIGS.page=page,url+=define_filters(CONFIGS.filters),window.location.replace(url)}function load_initial_filters(){OrderSelect.childNodes.forEach((element=>{element.value&&element.value==CONFIGS.order&&element.setAttribute("selected","true")})),document.querySelector("#name-input").value=CONFIGS.filters.name||"",document.querySelector("#category-input").childNodes.forEach((element=>{element.value&&element.value==CONFIGS.filters.category&&element.setAttribute("selected","true")})),document.querySelector("#province-input")&&document.querySelector("#province-input").childNodes.forEach((element=>{element.value&&element.value==CONFIGS.filters.province&&element.setAttribute("selected","true")}))}OrderSelect.addEventListener("change",(e=>change_order(e.target.value))),PaginationDiv&&PaginationDiv.addEventListener("click",(e=>{const page=e.target.dataset.page;page&&change_page(page)})),FiltersForm.addEventListener("submit",(e=>{e.preventDefault(),submit_filter(e.target)})),ResetButton.addEventListener("click",(e=>{e.preventDefault(),window.location.replace(CONFIGS.url)})),load_initial_filters()}if(document.getElementById("List")){const listContainer=document.getElementById("List"),loadMoreButton=document.getElementById("LoadMore"),totalCounter=document.querySelector("#Total b"),Pagination={url:listContainer.dataset.url,redirect:listContainer.dataset.redirect,page:0,per_page:0,total:0};async function LoadArticles(data){let container="";data.forEach((article=>{const data=article.category?article.category.name:article.province,card=`<a class="Card" href="${Pagination.redirect+"/"+article.id}">\n                <span class='Card__id'>#${article.id}</span>\n                <h4 class="Card__h4">${article.name}</h4>\n                <span class="Card__span" title="${data}">${data}</span>\n            </a>`;container+=card})),listContainer.innerHTML+=container}async function loadMore(){Pagination.page+=1,fetch(Pagination.url+"?page="+Pagination.page).then((response=>response.json())).then((response=>{Pagination.per_page=response.per_page,0==Pagination.total&&(Pagination.total=response.total,totalCounter.textContent=response.total),LoadArticles(response.data),Pagination.per_page*Pagination.page>=Pagination.total&&(loadMoreButton.style.display="none")})).catch((err=>console.log(err)))}loadMoreButton.addEventListener("click",(e=>{e.preventDefault(),loadMore()})),loadMore()}